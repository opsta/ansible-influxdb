---
influxdb_service_name: influxdb

# Package variables
influxdb_apt_key_url: https://repos.influxdata.com/influxdb.key
influxdb_apt_repo: "deb https://repos.influxdata.com/{{ ansible_lsb.id|lower }} {{ ansible_lsb.codename|lower }} stable"

# General variables
influxdb_config_path: /etc/influxdb
influxdb_config_file_name: influxdb.conf
influxdb_config_file_path: "{{ influxdb_config_path }}/{{ influxdb_config_file_name }}"

# Database management
influxdb_databases:
  - database1
  - database2

# User management
influxdb_credentials_admin:
  -  username: admin1
     password: CHANGEME
  -  username: admin2
     password: CHANGEME

influxdb_credentials_user:
  - username: user1
    password: CHANGEME
    database:
      - all.database1 # [ALL,READ,WRITE].[database]
      - all.database2
  - username: user2
    password: CHANGEME
    database:
      - all.database1 # [ALL,READ,WRITE].[database]

# Configuration
#   default config see more
#   https://github.com/influxdata/influxdb/blob/v1.2.2/etc/config.sample.toml
# FYI
# influxdb_config:
#   <tag>:
#     <key>: <value>
#
global:
  reporting-disabled: false
  bind-address: ":8088"

influxdb_config:
  meta:
    dir: "/var/lib/influxdb/meta"

  data:
    dir: "/var/lib/influxdb/data"
    wal-dir: "/var/lib/influxdb/wal"

  http:
    enabled: true
    https-enabled: true
    https-certificate: <bundled-certificate-file>.pem
    https-private-key: <bundled-certificate-file>.pem
    bind_address: ":8086"
    auth_enabled: true
    log_enabled: true

  coordinator: {}
  retention: {}
  shard_precreation: {}
  monitor: {}

  subscriber: {}
  continuous_queries:
    enabled: true
    log_enabled: true
  listeners:
    graphite: {}
    collectd: {}
    opentsdb: {}
    udp: {}

influxdb_search_config_path: "{{ playbook_dir }}/files/groups/{{ item }}/influxdb"
influxdb_search_config_paths: []

influxdb_host_config_file_path: "{{ influxdb_host_config_path | default(inventory_hostname) }}/influxdb.conf.j2"